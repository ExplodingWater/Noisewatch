<!DOCTYPE html>
<html lang="sq">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/css/style.css">
    <title>Raporto ZhurmÃ«n - Noisewatch Tirana</title>
</head>
<body>
    <nav>
        <a class="logo" href="/"></a>
        <a href="/">Kreu</a>
        <a href="/about">Rreth Nesh</a>
        <a href="/services">ShÃ«rbimet</a>
        <a href="/map">Harta</a>
        <a href="/report">Raporto</a>
        <a class="al" href="/report" title="Shqip"></a>
        <a class="en" href="/en/report" title="English"></a>
    </nav>

    <main class="report-container">
        <div class="report-form">
            <h1>Raporto njÃ« zhurmÃ«</h1>
            <p class="subtitle">Raporto njÃ« ngjarje zhurme pranÃ« teje.</p>

            <form id="noiseReportForm">
                <div class="form-section location-section">
                    <div class="location-header">
                        <h2>ğŸ“ Vendndodhja</h2>
                        <button type="button" id="getLocationBtn" class="location-btn">
                            ğŸ“ PÃ«rdor Vendndodhjen Aktuale
                        </button>
                    </div>
                    <p class="location-status" id="locationStatus">Kliko pÃ«r tÃ« marrÃ« vendndodhjen tÃ«nde aktuale</p>
                    <p class="permission-hint" id="locationPermissionHint" style="display:none;">
                        Leja e vendndodhjes Ã«shtÃ« bllokuar. Ju lutemi aktivizojeni nÃ« cilÃ«simet e shfletuesit dhe provoni pÃ«rsÃ«ri.
                    </p>
                    <div class="coordinates" id="accuracy" style="display:none;">
                        <p>SaktÃ«sia: <span id="accuracyMeters">--</span> metra</p>
                        <p style="font-size:12px;color:rgba(0,0,0,0.6)">Kujdes: DÃ«rgimi i raporteve nga njÃ« laptop ose kompjuter desktop mund tÃ« jetÃ« shumÃ« i pasaktÃ«.</p>
                    </div>
                    <div class="coordinates" id="coordinates" style="display: none;">
                        <p>Latitude: <span id="latitude"></span></p>
                        <p>Longtitude: <span id="longitude"></span></p>
                    </div>
                </div>
                <div class="form-section">
                    <h2>PÃ«rshkrimi</h2>
                    <textarea 
                        id="description" 
                        placeholder="PÃ«rshkruani shkurt zhurmÃ«n (p.sh., 'Punime tÃ« zhurmshme', 'ZhurmÃ« trafiku', 'MuzikÃ« nga njÃ« bar pranÃ«')"
                        required
                        maxlength="255"
                    ></textarea>
                    <div class="char-count">
                        <span id="charCount">0</span>/255 karaktere
                    </div>
                </div>

                <div class="form-section">
                    <h2>Regjistrim Audio pÃ«r Matjen e dB (decibels)</h2>
                    <div class="recording-controls">
                        <button type="button" id="startRecordingBtn" class="record-btn">
                            Regjistro
                        </button>
                        <button type="button" id="stopRecordingBtn" class="record-btn stop" disabled>
                            Stop
                        </button>
                    </div>
                    
                    <div class="recording-status" id="recordingStatus">
                        Kliko "Regjistro" pÃ«r tÃ« nisur regjistrimin e audios 5-sekondÃ«she
                    </div>
                    <p class="permission-hint" id="microphonePermissionHint" style="display:none; text-align:center;">
                        Leja per perdorimin e  mikrofonit Ã«shtÃ« bllokuar. Ju lutemi aktivizojeni nÃ« cilÃ«simet e browserit tuaj dhe provojeni pÃ«rsÃ«ri.
                    </p>
                    
                    <div class="audio-visualizer" id="audioVisualizer" style="display: none;">
                        <canvas id="visualizerCanvas" width="300" height="100"></canvas>
                    </div>
                    
                    <div class="db-display" id="dbDisplay" style="display: none;">
                        <div class="db-value">
                            <span id="dbValue">--</span> dB
                        </div>
                        <div class="db-level" id="dbLevel"></div>
                    </div>
                </div>

                <div class="form-section">
                    <button type="submit" id="submitBtn" class="submit-btn" disabled>
                        DÃ«rgo Raportin
                    </button>
                    <p class="privacy-note">
                        Raporti juaj do tÃ« dÃ«rgohet nÃ« mÃ«nyrÃ« anonime. Dhenat e juaja personale nuk do tÃ« mblidhen.
                    </p>
                </div>
            </form>
        </div>
    </main>

    <script src="/js/report-logic.js"></script>
</body>
</html>
